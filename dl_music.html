<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
<!-- ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ -->
<link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New&display=swap" rel="stylesheet">

<title>ç‰¹å…¸DLãƒšãƒ¼ã‚¸</title>

<style>
    :root {
      --bg:#ddd6fe; --fg:#4b3f72; --acc:#e0aaff; --muted:#4b3f72;
      --card:#f8f7fb;
      --wrap-pad-x: 24px;
    }
@media (max-width:480px){
  :root{ --wrap-pad-x: 18px; }              /* ã‚¹ãƒãƒ›æ™‚ã® .wrap padding */
}
    body{
margin:0;font-family: "Zen Kaku Gothic New", 
system-ui, 
sans-serif;
background:var(--bg);
color:var(--fg);
}

 h1 { 
      margin-bottom: 20px;
      text-align: center;
      font-family: sans-serif;
      background: #ddd6fe;
      color: #4b3f72;
      text-align: center;
      margin: 0;
 }
p { text-align: center;
}
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }

    .wrap{max-width:960px;margin:auto;padding:24px}
    h1{font-size:clamp(20px,3.8vw,28px);margin:0 0 12px}
    .lead{color:var(--muted);margin:0 0 20px;font-size:14px}
    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ»ã‚°ãƒªãƒƒãƒ‰ */
    .toneGrid{
      display:grid;gap:16px;
      grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
    }
    .toneCard{
      background:var(--card);border-radius:14px;padding:14px 14px 12px;
      box-shadow:0 6px 24px rgba(0,0,0,.25);
    }
    .toneTitle{margin:0 0 8px;font-weight:700;font-size:16px}
    audio{width:100%;height:40px}
    .actions{display:flex;gap:10px;align-items:center;justify-content:flex-start;margin-top:10px}
.dlBtn{
  appearance:none;
  border:0;
  border-radius:8px;
  padding:10px 14px;
  background:#c4a3ff;
  color:#fff;
  font-weight:700;
  text-decoration:none;
  display:inline-flex;
  gap:5px;
  align-items:center;
  box-shadow:0 4px 14px rgba(255,77,141,.35);
}

/* ã‚¯ãƒªãƒƒã‚¯ä¸­ã‚„å‡¦ç†ä¸­ï¼ˆpointer-events:none ãŒä»˜ä¸ã•ã‚ŒãŸæ™‚ï¼‰ã®è¦‹ãŸç›® */
.dlBtn[style*="pointer-events: none"] {
  opacity: .85;
}
.size{font-size:12px;color:var(--muted)}
    /* ã‚¹ãƒãƒ›ä½™ç™½æœ€é©åŒ– */
    @media (max-width:480px){
      .wrap{padding:18px}
      .toneTitle{font-size:15px}
    }
.bulk-download{margin:14px 0 22px}
.bulk-download {display:inline-flex;align-items:center;gap:.5rem}

#download:hover,
.dlBtn:hover {
  background: #e73370;
}
.dlBtn.disabled {
  pointer-events: none;
  opacity: .85;
}
/* --- ã”åˆ©ç”¨ã«ã¤ã„ã¦ï¼ˆéŸ³æ¥½DLãƒšãƒ¼ã‚¸ï¼‰ --- */
.usage-note{
  /* è¦‹ãŸç›®(è‰²ãƒ»å½±ãªã©)ã¯ãã®ã¾ã¾ */
  background: var(--card);
  border: 1px solid #e5d9ff;
  box-shadow: 0 6px 18px rgba(76,29,149,.07);
  border-radius: 12px;
  padding: 16px 20px;
  margin: 16px auto;
  color: var(--fg);
  text-align: left;
  line-height: 1.7;
  box-sizing: border-box;

  /* â†ã‚³ã‚³ãŒè‚ï¼š.wrap ã®å·¦å³ä½™ç™½åˆ†ã ã‘ç¸®ã‚ã¦ä¸­å¤®å¯„ã› */
  width: calc(100% - (var(--wrap-pad-x) * 2));
  max-width: calc(960px - (var(--wrap-pad-x) * 2));
}

.usage-note h2{
  font-size:16px;
  margin:0 0 8px;
  text-align:center;
  color:#7c3aed;
}
.usage-note ul{ margin:.4rem 0 0; padding-left:1.2rem; }
.usage-note li{ margin:.35rem 0; }

/* ã‚¹ãƒãƒ›æœ€é©åŒ– */
@media (max-width:480px){
  .usage-note{
    padding:12px 14px;
    margin:16px auto;
    font-size:14px;
    line-height:1.6;
  }
  .usage-note h2{ font-size:15px; }
  .usage-note ul{ padding-left:1rem; }
}

  </style>


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-587TGTD330"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-587TGTD330');
</script>

  <meta name="viewport" content="width=device-width,initial-scale=1.0">
<base href="https://boyfriends-project.github.io/nocturnal/">
  
</head>

<body>

 <main class="wrap" id="toneDL">

    <h1>å¿ƒã®éŸ³ï¼ˆToneï¼‰DLãƒšãƒ¼ã‚¸</h1>
    <p class="lead">ğŸ“¦ ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆZIPå½¢å¼ï¼‰ã§ã¯<strong>ZIPè§£å‡ã‚¢ãƒ—ãƒª</strong>ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>ã€€App Store / Google Play ãªã©ã§ã‚¢ãƒ—ãƒªã‚’ã”æº–å‚™ã®ä¸Šã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä¸‹ã•ã„ã€‚</p>

<div class="bulk-download">
  <a class="dlBtn" href="audio/tone_all.zip" download>
    ğŸµ éŸ³æ¥½13æ›²ã‚’ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  </a>
</div>
    <div class="toneGrid" id="toneGrid"></div>
  </main>

<section class="usage-note">
  <h2>ğŸ””ã”åˆ©ç”¨ã«ã¤ã„ã¦</h2>
  <p>å½“ã‚µã‚¤ãƒˆãŠã‚ˆã³BOYFRIENDSå…¬å¼LINEã«ã¦æä¾›ã•ã‚Œã‚‹éŸ³æ¥½ã¯ã€è‘—ä½œæ¨©æ³•ã«ã‚ˆã‚Šä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
  <ul>
    <li>ç„¡æ–­è»¢è¼‰ãƒ»äºŒæ¬¡é…å¸ƒãƒ»å•†ç”¨åˆ©ç”¨ã¯ç¦æ­¢ã§ã™ã€‚</li>
    <li>å€‹äººåˆ©ç”¨ã‚’ç›®çš„ã¨ã—ãŸSNSã§ã®ã‚·ã‚§ã‚¢ã¯å¤§æ­“è¿ã§ã™ğŸ’</li>
    <li>è©³ç´°ãªåˆ©ç”¨ã‚’ã”å¸Œæœ›ã®å ´åˆã¯é‹å–¶è€…ã¾ã§ã”ç›¸è«‡ãã ã•ã„ã€‚</li>
  </ul>
</section>


<p>
  <a class="dlBtn" a href="dl_wallpaper.html">å¾…ã¡å—ã‘ç”»åƒã®DLãƒšãƒ¼ã‚¸ã¸è¡Œã</a>
</p>

<!-- ã“ã®ãƒšãƒ¼ã‚¸å°‚ç”¨JSï¼ˆIIFEã§å¤–éƒ¨ã¸æ¼ã‚‰ã•ãªã„ï¼‰ -->
<script>
/* ---- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---- */
function formatFileSize(bytes){ return `${(bytes/1024/1024).toFixed(2)} MB`; }
async function getFileSize(url){
  const r = await fetch(url,{method:"HEAD"});
  const s = r.headers.get("Content-Length");
  return s ? formatFileSize(+s) : "ã‚µã‚¤ã‚ºä¸æ˜";
}
function fileNameFrom(path, fallback="download.mp3"){
  try { return decodeURIComponent((path.split("/").pop()||"").split("?")[0]) || fallback; }
  catch { return fallback; }
}

/* ---- ç’°å¢ƒåˆ¤å®š ---- */
const isProd = /boyfriends-project\.github\.io$/i.test(location.hostname);
const isLocalLike =
  location.protocol === "file:" ||
  location.hostname === "localhost" ||
  location.hostname === "127.0.0.1" ||
  location.hostname === "";

/* ---- éŸ³æºãƒ‘ã‚¹ ---- */
const AUDIO_BASE = "audio";

/* ---- ãƒ‡ãƒ¼ã‚¿ ---- */
const tones = [
  { no:1,  name:"ã‚¢ã‚¦ãƒ­ãƒ©",   meaning:"å¤œæ˜ã‘" },
  { no:2,  name:"ãƒ´ã‚¡ãƒªã‚ªãƒ³", meaning:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸" },
  { no:3,  name:"ã‚¨ã‚¯ã‚¹ãƒ‘ãƒ³ã‚µ", meaning:"åºƒãŒã‚Š" },
  { no:4,  name:"ã‚¯ã‚¨ã‚¹ãƒˆãƒ©", meaning:"æ¢æ±‚" },
  { no:5,  name:"ãƒ«ãƒ¼ãƒŸãƒŠ",   meaning:"è¼ã" },
  { no:6,  name:"ã‚¨ã‚¯ã‚¤ãƒªã‚¢", meaning:"èª¿å’Œ" },
  { no:7,  name:"ãƒŸã‚¹ãƒ†ã‚£ã‚¢", meaning:"ç¥ç§˜" },
  { no:8,  name:"ãƒ•ãƒ«ãƒ¼ãƒ©",   meaning:"æµã‚Œ" },
  { no:9,  name:"ãƒ¡ãƒ³ã‚¿ãƒ¼ãƒ©", meaning:"å°å¸«" },
  { no:10, name:"ãƒ†ãƒ³ãƒ—ãƒ¬ã‚¢", meaning:"èª¿å¾‹" },
  { no:11, name:"ãƒªãƒ™ãƒªã‚¢",   meaning:"è§£æ”¾" },
  { no:12, name:"ãƒã‚¯ã‚µãƒªã‚¢", meaning:"çµã³" },
  { no:13, name:"ãƒ‘ãƒ«ãƒ•ã‚§ãƒªã‚¢", meaning:"å®Œæˆ" },
];

/* ---- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é–¢æ•° ---- */
function attachDLFeedback(a){
  if (!a) return;
  a.addEventListener("click", () => {
    if (a.dataset.busy === "1") return;
    const label = a.textContent;
    a.dataset.busy = "1";
    a.textContent = "âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹ï¼ˆé€šçŸ¥/ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚’ç¢ºèªï¼‰";
    a.style.pointerEvents = "none";
    setTimeout(() => {
      a.textContent = label;
      a.style.pointerEvents = "";
      delete a.dataset.busy;
    }, 2500);
  }, { passive: true });
}

/* ---- æç”» ---- */
const grid = document.getElementById("toneGrid");

tones.forEach(t=>{
  const src = `${AUDIO_BASE}/tone${t.no}.mp3`;

  const card = document.createElement("section");
  card.className = "toneCard";
  card.innerHTML = `
    <h2 class="toneTitle">â„–${t.no}. ${t.name} â™¬ ${t.meaning}</h2>
    <audio controls preload="none" src="${src}"></audio>
    <div class="actions">
      <a class="dlBtn" href="${src}" download>ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
      <span class="fileSize">è¨ˆæ¸¬ä¸­â€¦</span>
    </div>`;
  grid.appendChild(card);

  // â† ã“ã®ç›´å¾ŒãŒã€Œã‚«ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã€
  const a = card.querySelector(".dlBtn");

  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤º
  getFileSize(src).then(size=>{
    card.querySelector(".fileSize").textContent = size;
  }).catch(()=>{
    card.querySelector(".fileSize").textContent = "ã‚µã‚¤ã‚ºä¸æ˜";
  });

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä»˜ä¸ï¼ˆæœ¬ç•ª/ãƒ­ãƒ¼ã‚«ãƒ«å…±é€šï¼‰
  attachDLFeedback(a);

  // ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã ã‘ï¼šé·ç§»ã‚’æ­¢ã‚ã¦Blobä¿å­˜ã‚’è©¦è¡Œ
  if (!isProd && isLocalLike) {
    a.addEventListener("click", async (e)=>{
      e.preventDefault();
      const url = a.href;
      const name = fileNameFrom(url);
      try {
        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const blob = await res.blob();
        const blobUrl = URL.createObjectURL(blob);
        const tmp = document.createElement("a");
        tmp.href = blobUrl;
        tmp.download = name;
        document.body.appendChild(tmp);
        tmp.click();
        tmp.remove();
        URL.revokeObjectURL(blobUrl);
      } catch (err) {
        window.open(url, "_blank");
      }
    }, { passive:false });
  }
});

// ã¾ã¨ã‚DLãƒœã‚¿ãƒ³ã«ã‚‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ä»˜ä¸
document.querySelectorAll('.bulk-download .dlBtn').forEach(attachDLFeedback);

// ã¾ã¨ã‚DLã®ãƒ­ãƒ¼ã‚«ãƒ«æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆä»»æ„ï¼‰
if (!isProd && isLocalLike) {
  document.querySelectorAll('.bulk-download .dlBtn[href]').forEach(a => {
    a.addEventListener('click', async (e) => {
      e.preventDefault();
      const url = a.href;
      const name = fileNameFrom(url, 'tone_all.zip');
      try {
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const blob = await res.blob();
        const blobUrl = URL.createObjectURL(blob);
        const tmp = document.createElement('a');
        tmp.href = blobUrl;
        tmp.download = name;
        document.body.appendChild(tmp);
        tmp.click();
        tmp.remove();
        URL.revokeObjectURL(blobUrl);
      } catch {
        window.open(url, '_blank');
      }
    }, { passive:false });
  });
}
</script>


</body>
</html>
