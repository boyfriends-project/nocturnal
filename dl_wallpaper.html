<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">

<!-- ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ -->
<link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New&display=swap" rel="stylesheet">

<title>ç‰¹å…¸DLãƒšãƒ¼ã‚¸</title>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-587TGTD330"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-587TGTD330');
</script>

<meta name="viewport" content="width=device-width,initial-scale=1.0">


  <style>
  body {
    font-family: sans-serif;
    background: #ddd6fe;
    color: #4b3f72;
    text-align: center;
    margin: 0;
    padding: 20px;
  }
  h1 { margin-bottom: 20px; }

  .gallery{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }
  .gallery img{
    width: 100%;
    max-width: 200px;
    border-radius: 8px;
    cursor: pointer;
    transition: transform .2s;
  }
  .gallery img:hover{ transform: scale(1.05); }

  /* ===== ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆä¸­å¤®ã‚ºãƒ¬å¯¾ç­–ãƒ»å®‰å…¨é ˜åŸŸå¯¾å¿œï¼‰ ===== */
.modal{
  display: none;
  position: fixed;
  inset: 0;
  z-index: 999;
  background: rgba(0,0,0,0.9);
  box-sizing: border-box;
  padding: max(12px, env(safe-area-inset-top))
           max(12px, env(safe-area-inset-right))
           max(12px, env(safe-area-inset-bottom))
           max(12px, env(safe-area-inset-left));
  justify-content: center; /* ä¸­å¤®å¯„ã› */
  align-items: center;
}
 .modal.open{
  display: flex;   /* Flexboxã§ä¸­å¤®é…ç½® */
}
/* ç”»åƒï¼‹DLãƒœã‚¿ãƒ³ã‚’ç¸¦ã«ã¾ã¨ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ */
.modal-content{
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;       /* ç”»åƒã¨ãƒœã‚¿ãƒ³ã®é–“éš” */
  max-height: 90vh;
}

.modal-content img{
  max-width: 92vw;
  max-height: 75vh;   /* ç”»åƒã¯ç”»é¢ã«åã¾ã‚‹ã‚ˆã†èª¿æ•´ */
  border-radius: 10px;
  object-fit: contain;
}
  .modal img{
    display: block;
    max-width: min(92vw, 1200px);
    max-height: 76vh;        /* ç”»é¢ã«åã¾ã‚‹é«˜ã• */
    height: auto;
    margin: 0;               /* ä½™ç™½ãŒä¸­å¿ƒè¨ˆç®—ã«å½±éŸ¿ã—ãªã„ã‚ˆã†ã« */
    border-radius: 10px;
    object-fit: contain;
  }

  /* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å½±éŸ¿ã•ã›ãªã„ï¼ˆå›ºå®šé…ç½®ï¼‰ */
  #close{
    position: fixed;
    top: max(12px, env(safe-area-inset-top));
    right: max(12px, env(safe-area-inset-right));
    font-size: 40px;
    color: #fff;
    cursor: pointer;
    line-height: 1;
  }

  /* ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®DLãƒœã‚¿ãƒ³ã¯ä¸­å¤®ä¸‹ã«è‡ªç„¶ã«é…ç½® */
  #modal-download{
  margin: 0; /* ä¸‹ã™ããªã„ã‚ˆã†ã«ä½™ç™½ãƒªã‚»ãƒƒãƒˆ */
}

  /* ===== ãƒœã‚¿ãƒ³ï¼ˆæ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³è¸è¥²ï¼‰ ===== */
.dlBtn{
  appearance:none;
  border:0;
  border-radius:8px;
  padding:10px 14px;
  background:#c4a3ff;
  color:#fff;
  font-weight:700;
  text-decoration:none;
  display:inline-flex;
  gap:5px;
  align-items:center;
  box-shadow:0 4px 14px rgba(255,77,141,.35);
}

/* ã‚¯ãƒªãƒƒã‚¯ä¸­ã‚„å‡¦ç†ä¸­ï¼ˆpointer-events:none ãŒä»˜ä¸ã•ã‚ŒãŸæ™‚ï¼‰ã®è¦‹ãŸç›® */
.dlBtn[style*="pointer-events: none"] {
  opacity: .85;
}
  .dlBtn:hover{ background:#e73370; }
  .dlBtn.disabled{ pointer-events:none; opacity:.6; }

  .bulk-download{ margin:14px 0 22px; }
  .bulk-download .dlBtn{ display:inline-flex;align-items:center;gap:.5rem; }

  .lead{ color:var(--muted); margin:0 0 20px; font-size:14px; }

  @media (max-width: 480px){
    body{ padding: 16px; }
  }
.dlBtn.disabled {
  pointer-events: none;
  opacity: .85;
}

</style>


<base href="https://boyfriends-project.github.io/nocturnal/">

</head>
<body>
  <h1>ã‚¹ãƒãƒ›ç”¨å£ç´™DLãƒšãƒ¼ã‚¸</h1>

    <p class="lead">ğŸ“¦ ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆZIPå½¢å¼ï¼‰ã§ã¯<strong>ZIPè§£å‡ã‚¢ãƒ—ãƒª</strong>ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>ã€€App Store / Google Play ãªã©ã§ã‚¢ãƒ—ãƒªã‚’ã”æº–å‚™ã®ä¸Šã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä¸‹ã•ã„ã€‚</p>

<div class="bulk-download">
  <a id="bulk-download" class="dlBtn"
     href="images/dl/wallpapers.zip" download>
    ğŸ“¦ å£ç´™20æšã‚’ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  </a>
</div>

  <!-- ã‚µãƒ ãƒä¸€è¦§ -->
  <div class="gallery">
    <img src="images/god/ãƒ«ãƒ“ãƒ¼ç¥.webp" data-full="images/dl/ç´…ç„”ã®æˆ¦ç¥ã‚¢ã‚°ãƒ‹ã‚ªã‚¹.webp" alt="ç¥ã•ã¾01" loading="lazy">
    <img src="images/god/ã‚»ãƒ¬ãƒŠã‚¤ãƒˆç¥.webp" data-full="images/dl/æœˆå…‰ã®å°ç¥ã‚»ãƒ¬ãƒ´ã‚£ã‚¹.webp" alt="ç¥ã•ã¾02" loading="lazy">
<img src="images/god/ã‚µãƒ•ã‚¡ã‚¤ã‚¢ç¥.webp" data-full="images/dl/å¤¢ç´¡ãã®å¹»ç¥ãƒã‚¯ãƒ†ã‚£ã‚¹.webp" alt="ç¥ã•ã¾03" loading="lazy">
    <img src="images/god/ã‚¢ãƒ³ãƒãƒ¼ç¥.webp" data-full="images/dl/æµ·çš‡ç¥ãƒŠã‚®ãƒãƒŸã‚³ãƒˆ.webp" alt="ç¥ã•ã¾04" loading="lazy">
    <img src="images/god/ã‚¬ãƒ¼ãƒãƒƒãƒˆç¥.webp" data-full="images/dl/å¥‘ç´„ã®å†¥ç‹ã‚¿ãƒŠã‚¯ãƒªã‚¹.webp" alt="ç¥ã•ã¾05" loading="lazy">

    <img src="images/god/ãƒ›ãƒ¯ã‚¤ãƒˆãƒ©ãƒ–ãƒ©ãƒ‰ãƒ©ã‚¤ãƒˆç¥.webp" data-full="images/dl/å…‰è™¹ã®æ©‹ç¥ã‚°ãƒªãƒ ãƒ«ã‚¹ãƒˆ.webp" alt="ç¥ã•ã¾06" loading="lazy">
    <img src="images/god/ãƒ©ãƒªãƒãƒ¼ç¥.webp" data-full="images/dl/è’¼ç’°ã®å®ˆå¸ã‚¨ãƒªãƒ¥ã‚·ã‚ªãƒ³.webp" alt="ç¥ã•ã¾07" loading="lazy">

<img src="images/god/ãƒˆãƒ‘ãƒ¼ã‚ºç¥.webp" data-full="images/dl/é™½ç¿”ã®è–ç¥ãƒ˜ãƒªã‚ªãƒ‡ã‚£ã‚¹.webp" alt="ç¥ã•ã¾08" loading="lazy">
    <img src="images/god/ãƒ¬ãƒƒãƒ‰ã‚³ãƒ¼ãƒ©ãƒ«ç¥.webp" data-full="images/dl/æµ·å“­ã®å¤§ç¥å¸ã‚¸ãƒ¥ãƒ³ãƒ¦ãƒ¼.webp" alt="ç¥ã•ã¾09" loading="lazy">
    <img src="images/god/ãƒ‘ãƒ¼ãƒ«ç¥.webp" data-full="images/dl/å¤©ç ã®é¾ç¥ãƒ¦ãƒ³ãƒ­ãƒ³.webp" alt="ç¥ã•ã¾10" loading="lazy">

    <img src="images/god/ã‚¢ã‚¯ã‚¢ãƒãƒªãƒ³ç¥.webp" data-full="images/dl/æ·±ç¢§ã®å°æ˜Ÿã‚¨ãƒ‰ãƒ¯ãƒ«ãƒ‰.webp" alt="ç¥ã•ã¾11" loading="lazy">
    <img src="images/god/ã‚¤ã‚¨ãƒ­ãƒ¼ã‚«ãƒ«ã‚µã‚¤ãƒˆç¥.webp" data-full="images/dl/é“æ‹“ã®ç¥ã‚«ã‚¸ãƒãƒŸã‚³ãƒˆ.webp" alt="ç¥ã•ã¾12" loading="lazy">
<img src="images/god/ã‚¤ãƒ³ã‚«ãƒ­ãƒ¼ã‚ºç¥.webp" data-full="images/dl/ç´…èª“ã®è¦‡å°†è»ãƒã‚ªãƒ©ãƒ³.webp" alt="ç¥ã•ã¾13" loading="lazy">
    <img src="images/god/ãƒ ãƒ¼ãƒ³ã‚¹ãƒˆãƒ¼ãƒ³ç¥.webp" data-full="images/dl/æ˜Ÿç’°ã®æ˜Ÿç¥ã‚¢ã‚¹ãƒˆãƒªã‚ªã‚¹.webp" alt="ç¥ã•ã¾14" loading="lazy">
    <img src="images/god/ãƒ©ãƒ”ã‚¹ãƒ©ã‚ºãƒªç¥.webp" data-full="images/dl/è³¢ç¿¼ã®ç©ºç¥ã‚ªãƒ«ãƒ‹ã‚¯ã‚¹.webp" alt="ç¥ã•ã¾15" loading="lazy">

    <img src="images/god/ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¢ã‚¤ç¥.webp" data-full="images/dl/è™çœ¼ã®è¦‡ç¥ãƒ¬ã‚°ãƒŠã‚¹.webp" alt="ç¥ã•ã¾16" loading="lazy">
    <img src="images/god/ãƒ¬ãƒƒãƒ‰ã‚«ãƒ¼ãƒãƒªã‚¢ãƒ³ç¥.webp" data-full="images/dl/å…‰éŸ¿ã®æ­Œç¥ãƒŸã‚«ãƒ…ã‚ªãƒˆ.webp" alt="ç¥ã•ã¾17" loading="lazy">

<img src="images/god/ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¹ã‚¿ãƒ«ç¥.webp" data-full="images/dl/æ°·é¡ã®å¤§éœŠãƒ´ã‚§ãƒªãƒŸãƒ¼ãƒ«.webp" alt="ç¥ã•ã¾18" loading="lazy">
    <img src="images/god/ã‚»ãƒ¬ã‚¹ã‚¿ã‚¤ãƒˆç¥.webp" data-full="images/dl/è½Ÿå¤©ã®é›·å¸ãƒ©ã‚¤ãƒ›ã‚¦.webp" alt="ç¥ã•ã¾19" loading="lazy">
    <img src="images/god/ã‚·ãƒˆãƒªãƒ³ç¥.webp" data-full="images/dl/çš‡ç¥ãƒ’ã‚«ãƒªã‚«ã‚²ãƒãƒŸã‚³ãƒˆ.webp" alt="ç¥ã•ã¾20" loading="lazy">
    <!-- å¿…è¦ãªåˆ†ã ã‘è¿½åŠ  -->
  </div>
<p>â€»ã“ã®å£ç´™ã¯ã€ŒWebPå½¢å¼ã€ã§ã™ã€‚ã»ã¼ã™ã¹ã¦ã®ã‚¹ãƒãƒ›ã§é€šå¸¸ã®å£ç´™ã¨åŒã˜ã‚ˆã†ã«ä½¿ãˆã¾ã™ã€‚<br>
ã‚‚ã—å¤ã„ç«¯æœ«ã§ä½¿ãˆãªã„å ´åˆã¯ã€PNGã«å¤‰æ›ã—ã¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>


  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="modal" class="modal">
  <span id="close">&times;</span>
  <div class="modal-content">
    <img id="modal-img" src="" alt="">
    <a id="modal-download" class="dlBtn" href="#" download>ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
  </div>
</div>

<script>
  const modal = document.getElementById("modal");
  const modalImg = document.getElementById("modal-img");
  const modalDownload = document.getElementById("modal-download");
  const closeBtn = document.getElementById("close");

  // ç’°å¢ƒåˆ¤å®š
  const isProd = /boyfriends-project\.github\.io$/i.test(location.hostname);
  const isLocalLike =
    location.protocol === "file:" ||
    location.hostname === "localhost" ||
    location.hostname === "127.0.0.1" ||
    location.hostname === "";

  function fileNameFrom(path, fallback="wallpaper.webp"){
    try {
      const name = decodeURIComponent((path.split('/').pop()||"").split("?")[0]);
      return name || fallback;
    } catch { return fallback; }
  }

  function openModal(previewSrc, fullSrc){
    const src = fullSrc || previewSrc;
    const safe = encodeURI(src);
    modal.classList.add("open");
    modalImg.src = safe;

    // æœ¬ç•ªã§ã¯ a[download] ã«ä»»ã›ã‚‹
    modalDownload.href = safe;
    modalDownload.setAttribute("download", fileNameFrom(src));
    modalDownload.textContent = "ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";

    document.body.style.overflow = "hidden";
  }

  function closeModal(){
    modal.classList.remove("open");
    modalImg.src = "";
    document.body.style.overflow = "";
  }

  // ã‚®ãƒ£ãƒ©ãƒªãƒ¼ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«
  document.querySelectorAll(".gallery img").forEach(img => {
    img.addEventListener("click", () => openModal(img.dataset.preview, img.dataset.full));
  });

  closeBtn.addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

  // ---- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã ã‘ï¼šé·ç§»ã‚’æ­¢ã‚ã¦Blobä¿å­˜ã‚’â€œè©¦è¡Œâ€ã€å¤±æ•—æ™‚ã¯æ–°è¦ã‚¿ãƒ–ã§è¡¨ç¤º ----
  if (!isProd && isLocalLike) {
    async function forceDownload(url, filename){
      // å¤±æ•—ã—ã‚„ã™ã„ã®ã§ã€ãƒ€ãƒ¡ãªã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹
      try {
        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const blob = await res.blob();
        const blobUrl = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = blobUrl;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(blobUrl);
        return true;
      } catch (e) {
        return false;
      }
    }

    modalDownload.addEventListener("click", async (e) => {
      e.preventDefault(); // é·ç§»ã‚’æ­¢ã‚ã‚‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰
      const url = modalDownload.href;
      const name = fileNameFrom(url);
      // Blobä¿å­˜ã‚’è©¦ã™ â†’ ãƒ€ãƒ¡ãªã‚‰æ–°è¦ã‚¿ãƒ–ã§é–‹ã
      const ok = await forceDownload(url, name);
      if (!ok) window.open(url, "_blank");
    }, { passive:false });
  }


// â‘  ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰æ•°ç§’ã ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™å°ã•ãªãƒ˜ãƒ«ãƒ‘ãƒ¼
function attachDLFeedback(a){
  if (!a) return;
  a.addEventListener("click", () => {
    // æ—¢ã«è¡¨ç¤ºä¸­ãªã‚‰é‡ã­ãªã„
    if (a.dataset.busy === "1") return;
    const label = a.textContent;
    a.dataset.busy = "1";
    a.textContent = "âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹ï¼ˆé€šçŸ¥/ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚’ç¢ºèªï¼‰";
    a.classList.add("disabled");
setTimeout(() => {
  a.textContent = label;
  a.classList.remove("disabled");   // â† disabledã‚¯ãƒ©ã‚¹ã‚’å¤–ã—ã¦å…ƒã«æˆ»ã™
}, 1500);
  }, { passive: true });
}

// â‘¡ ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ãƒœã‚¿ãƒ³ã¨ã€ï¼ˆã‚ã‚Œã°ï¼‰ã¾ã¨ã‚DLã®ãƒœã‚¿ãƒ³ã«ã‚‚ä»˜ä¸
attachDLFeedback(document.getElementById("modal-download"));
document.querySelectorAll(".bulk-download .dlBtn").forEach(attachDLFeedback);
</script>

<p>
  <a class="dlBtn" href="dl_music.html">Toneã®DLãƒšãƒ¼ã‚¸ã¸è¡Œã</a>
</p>

</body>
</html>

